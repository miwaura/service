
docker-compose.ymlのある場所で
docker build -t wp srcs/wordpress 
docker build -t mysql-con srcs/mysql 
docker-compose up -d
http://localhost:8080/wordpress/ でwordpressでアカウントを作成する(ユーザー登録前だとphpmyadminにアクセスするとhttp500が返る)
http://localhost:8080/phpmyadmin/ でdbuser, passwordでログインしようとすると
mysqli::real_connect(): (HY000/2002): No such file or directoryと表示される
docker exec -it wp sh
/ # vim usr/share/webapps/phpmyadmin/config.inc.php
$cfg['Servers'][$i]['host'] = 'localhost';を
$cfg['Servers'][$i]['host'] = 'mysql-con:3306';に変更
http://localhost:8080/phpmyadmin/
でdbuser, passwordでログインすると　http 500　の画面になる
更新すると　http://localhost:8080/phpmyadmin/index.php
の管理画面になる。
管理画面にて
”要求処理中でのエラー
エラーコード：200
エラーテキスト：OK (rejected)
ネットワーク接続が失われているようです。接続状況とサーバーの状態を確認してください。”
と赤い画面で表示される。

/var/log # cat php7/error.log 
[09-Nov-2020 07:37:47] NOTICE: configuration file /etc/php7/php-fpm.conf test is successful

[09-Nov-2020 07:37:48] NOTICE: fpm is running, pid 149
[09-Nov-2020 07:37:48] NOTICE: ready to handle connections
/var/log # cat nginx/error.log 
2020/11/09 07:38:10 [error] 118#118: *2 FastCGI sent in stderr: "PHP message: WordPress database error Table 'dbtest.wp_options' doesn't exist for query INSERT INTO `wp_options` (`option_name`, `option_value`, `autoload`) VALUES ('nonce_key', '6m~ I#vWTscI0x^:I4=(6SLPjXV-Akh1SNCNg0l1barw,&ogzcEo{1t9V_(PFE3.', 'no') ON DUPLICATE KEY UPDATE `option_name` = VALUES(`option_name`), `option_value` = VALUES(`option_value`), `autoload` = VALUES(`autoload`) made by wp_can_install_language_pack, WP_Upgrader->fs_connect, Automatic_Upgrader_Skin->request_filesystem_credentials, WP_Upgrader_Skin->request_filesystem_credentials, request_filesystem_credentials, wp_nonce_field, wp_create_nonce, wp_hash, wp_salt, update_site_option, update_network_option, add_network_option, add_optionPHP message: WordPress database error Table 'dbtest.wp_options' doesn't exist for query INSERT INTO `wp_options` (`option_name`, `option_value`, `autoload`) VALUES ('nonce_salt', 'Z[u2`BCH5?HPx0O6H6BPfUZvioz5kTJwM:e ]~(6iZ7xlmcy>gVSSYlJsX+zro31', 'no') ON DUPLICATE KEY UPDATE `option_name` = VALUES(`option_name`), `option_value` = VALUES(`option_value`), `autoload` = VALUES(`autoload`) made by wp_can_install_language_pack, WP_Upgrader->fs_connect, Automatic_Upgrader_Skin->request_filesystem_credentials, WP_Upgrader_Skin->request_filesystem_credentials, request_filesystem_credentials, wp_nonce_field, wp_create_nonce, wp_hash, wp_salt, update_site_option, update_network_option, add_network_option, add_option" while reading response header from upstream, client: 172.27.0.1, server: , request: "GET /wordpress/wp-admin/install.php HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "localhost:8080"
->一度http 500になったときのエラー,phpmyadminの画面で更新を何度かするとhttp500の画面と真っ白な画面を繰り返すようになります。